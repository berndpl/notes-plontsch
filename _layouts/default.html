<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ page.title | capitalize | default: content | strip_html | truncatewords: 10, "" }} - {{ site.title }}</title>
    <meta name="title" content="{{ page.title | default: content | strip_html | capitalize | truncatewords: 10, '' }} - {{ site.title }}" />
    <meta name="description" content="{{ content | strip_html | strip_newlines | truncate: 160 }}" />
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
    <link rel="icon" type="image/png" href="{{ '/apple-touch-icon.png' | relative_url }}">
    <link rel="apple-touch-icon" href="{{ '/apple-touch-icon.png' | relative_url }}">

    <!-- Social Media Share Image
         Priority: 1) page.social-teaser — dedicated social-only teaser image (never rendered in post)
                   2) page.image — but only if it's a real image, not a .js visual
                   3) fallback to apple-touch-icon
         This keeps social-teaser separate from the in-post visual system (JS canvas, etc.) -->
    {% assign share_image = nil %}
    {% assign has_share_image = false %}
    {% if page.social-teaser %}
      {% assign share_image = page.social-teaser | absolute_url %}
      {% assign has_share_image = true %}
    {% elsif page.image %}
      {% unless page.image contains '.js' %}
        {% assign share_image = page.image | absolute_url %}
        {% assign has_share_image = true %}
      {% endunless %}
    {% endif %}
    {% unless share_image %}
      {% assign share_image = '/apple-touch-icon.png' | absolute_url %}
    {% endunless %}

    <!-- Open Graph Tags -->
    <meta property="og:title" content="{{ page.title | default: content | strip_html  | capitalize | truncatewords: 10, '' }}" />
    <meta property="og:description" content="{{ content | strip_html | strip_newlines | truncate: 160 }}" />
    <meta property="og:url" content="{{ page.url | absolute_url }}" />
    <meta property="og:type" content="{% if page.layout == 'post' %}article{% else %}website{% endif %}" />
    <meta property="og:image" content="{{ share_image }}" />
    {% if has_share_image %}<meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="638" />{% else %}<meta property="og:image:width" content="180" />
    <meta property="og:image:height" content="180" />{% endif %}
    <!-- Twitter Card — upgrades to large image when a real thumbnail/image is available -->
    <meta name="twitter:card" content="{% if has_share_image %}summary_large_image{% else %}summary{% endif %}" />
    <meta name="twitter:image" content="{{ share_image }}" />
  </head>
  <body>
    <header{% if is_about_active %} class="about-header"{% endif %}>
      <nav>
        <!-- <a href="{{ '/about/' | relative_url }}"><img src="{{ '/assets/images/leaf.svg' | relative_url }}" alt="Home" width="24" height="24"></a> -->
        {% assign is_notes_active = false %}
        {% if page.url == '/' %}{% assign is_notes_active = true %}{% endif %}
        {% if page.url == '' %}{% assign is_notes_active = true %}{% endif %}
        {% if page.layout == 'default' and page.title == 'Notes' %}{% assign is_notes_active = true %}{% endif %}
        {% if page.layout == 'post' %}{% assign is_notes_active = true %}{% endif %}
        <a href="{{ '/' | relative_url }}"{% if is_notes_active %} class="active"{% endif %}>Notes</a>
        {% assign is_about_active = false %}
        {% if page.permalink == '/about/' %}{% assign is_about_active = true %}{% endif %}
        {% if page.url == '/about/' %}{% assign is_about_active = true %}{% endif %}
        <a href="{{ '/about/' | relative_url }}"{% if is_about_active %} class="active"{% endif %}>About</a> 
        <!-- <a href="#" class="inactive">Meaning <span class="badge">alpha</span></a> -->
        {% if is_about_active %}
        <a href="https://www.linkedin.com/in/bernd-plontsch-14538b13" class="lets-talk-button">Let's talk</a>
        {% endif %}
      </nav>
    </header>

    {% assign is_generated = false %}
    {% if page.title == 'Questions' or page.title == 'Insights' %}{% assign is_generated = true %}{% endif %}
    {% assign is_questions = false %}
    {% if page.title == 'Questions' %}{% assign is_questions = true %}{% endif %}
    <main{% if page.permalink == '/about/' %} class="about-page"{% elsif is_questions %} class="generated-page questions-page"{% elsif is_generated %} class="generated-page"{% endif %}>
      {{ content }}
    </main>

    <footer>
      <p>&copy; {{ site.time | date: '%Y' }} {{ site.title }} • {{ site.description }}Notes, <a href="{{ '/questions' | relative_url }}">questions</a>, <a href="{{ '/insights' | relative_url }}">insights</a> <!--a href="{{ '/work/' | relative_url }}" class="nav-link">Work</a--></p>
    </footer>
  </body>
</html>